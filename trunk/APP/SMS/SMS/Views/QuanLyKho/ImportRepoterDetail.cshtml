@model SMS.Models.ImportReportDetail
@using PagedList.Mvc;

@{
    ViewBag.Title = "BÁO CÁO NHẬP KHO CHI TIẾT";
}
<hgroup class="title">
    <h2>@ViewBag.Message</h2>
</hgroup>
<h3>Báo cáo nhập kho chi tiết</h3>
<link href="~/Content/PagedList.css" rel="stylesheet" type="text/css" />
<link href="~/Content/css/style.css" rel="stylesheet" type="text/css" />
<link href="~/Content/KhachHang.css" rel="stylesheet" type="text/css" />
<script src="~/Content/js/jquery-1.9.1.js"></script>
<script src="~/Content/js/jquery-ui-1.10.3.custom.js"></script>
<script src="~/Content/js/jquery-ui-1.10.3.custom.min.js"></script>
<script src="../../Scripts/scrollTable.js" type="text/javascript"></script>
<br />
@using (Html.BeginForm("ImportRepoterDetail", "QuanLyKho", FormMethod.Post, new { @id = "index" }))
{
    <div>
        <table width="100%">
            <tr style="width:100%">
                <td class='inner colwidth head '> Tên sản phẩm </td>
                <td class='inner colwidth head '> Đơn vị </td>
                <td class='inner colwidth head '>  Số lượng nhập  </td>
                <td class='inner colwidth head '>  Đơn giá </td>
                <td class='innerLast colwidth head '>  Thành tiền </td>
            </tr>
            @{
                DateTime ImportDate = (DateTime)Model.ResultList[0].NGAY_NHAP;
            }
            <tr>
                <td class="innerLast colwidth" colspan="5" style="background-color:lightgray"> @ImportDate.ToString("dd/MM/yyyy") </td>
            </tr>
            @foreach (var dbHist in Model.ResultList)
            {
                if (ImportDate != (DateTime)dbHist.NGAY_NHAP)
                {
                    ImportDate = (DateTime)dbHist.NGAY_NHAP;
                    <tr>
                        <td class="innerLast colwidth"  colspan="5" style="background-color:lightgray"> @ImportDate.ToString("dd/MM/yyyy") </td>
                    </tr>
                }
                <tr class="inner column-hscroll alignCenter">
                    <td class="inner colwidth">
                        @dbHist.TEN_SAN_PHAM
                    </td>
                    <td class="inner colwidth">
                        @dbHist.TEN_DON_VI
                    </td>
                    <td class="inner colwidth">
                        @dbHist.SO_LUONG.ToString("0,0.00")
                    </td>
                    <td class="inner colwidth">
                        @dbHist.GIA_VON.ToString("0,0.00")
                    </td>
                    <td class="innerLast colwidth">
                        @dbHist.VALUE.ToString("0,0.00")
                    </td>
                    </tr>
            }
            <tr class="inner column-hscroll alignCenter">
                <td class="innerLast colwidth" colspan="4" style="background-color:lightgray"> Tổng cộng </td>
                <td class="innerLast colwidth" style="background-color:lightgray">@Model.VALUE.ToString("0,0.00")</td>
            </tr>
        </table>
        <table width="100%">
            <tr>
                <td>
                    <div style="text-align:left; padding-top:3px;">
                        <label>@ViewBag.Count sản phầm </label>
                    </div>
                </td>
                <td>
                    <div style="text-align: right;  padding-top: 3px; ">
                        @Html.PagedListPager(Model.ResultList, page => Url.Action("ImportRepoterDetail",
                         new { page, sortOrder = ViewBag.CurrentSort, currentFilter = ViewBag.CurrentFilter }))
                    </div>
                </td>
            </tr>

        </table>
    </div>
}